<!DOCTYPE html>
<html lang="ru">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Еще один шанс - История Аджамилы</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,700;1,400&family=Cormorant+Infant&family=Open+Sans:ital,wdth,wght@0,75..100,300..800;1,75..100,300..800&display=swap"
          rel="stylesheet">
  </head>

  <section id="hero">
    <style>
      #hero {
        display: flex;
        height: 90vh;
        flex-direction: column;
        position: relative;
        background: linear-gradient(to top, black 0%, #00000000 50%), url(./img/arch.svg), radial-gradient(66.26% 75.26% at 50% 82.56%, #050404 6.29%, #160A08 50.05%, #26100C 100%);
        background-size: contain;
        background-position: center top;
        background-repeat: no-repeat;
        margin: 0 auto 0;
      }
    </style>

    <h4
        style="padding: 3.2rem 0; font-variant: small-caps; letter-spacing: .108ch; background: radial-gradient(40% 100% at 50% 0%, #322326 0%, #00000000 100%) center top no-repeat">
      Фильм по мотивам 6-й песни Шримад Бхагаватам</h4>

    <div id="characters">
      <style>
        #characters {
          position: relative;
          height: 40rem;
          min-width: 43.2rem;
          width: 60vw;
          margin-top: 5.4rem;
          max-width: 1080px;
          align-self: center;

          img {
            position: absolute;
            inset: auto 0 0;
            margin: 0 auto;
          }
        }
      </style>
      <img src="./img/kamali.png"
           style="right: -30rem; width: 27rem; bottom: 3rem;" />
      <img src="./img/varsha.png"
           style="left: -29rem; width: 27rem; bottom: 5.4rem;" />
      <img src="./img/ajamil.png" style="left: -3rem; width: 40rem;" />
      <!--
        <div id="varsha" class="character">
          <video muted loop width="100%" onmouseenter="this.play();"
                  onmouseleave="this.pause()">
            <source src="./img/Varsha.webm" type="video/webm">
          </video>
          <style>
            #varsha {
              position: absolute;
              width: 30%;
              z-index: 1;
              top: 0;
              left: 0;
            }

            #varsha:after {
              content: '';
              position: absolute;
              bottom: 0;
              left: 0;
              right: 0;
              height: 50%;
              background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.75) 100%)
            }
          </style>
        </div>
        <div id="ajamil" class="character">
          <style>
            #ajamil {
              position: absolute;
              top: 0;
              width: 66%;
              z-index: 2;
              left: 0;
              right: 0;
              margin: auto
            }
          </style>
          <video muted loop width="100%" onmouseenter="this.play();"
                  onmouseleave="this.pause()">
            <source src="./img/ajamil.webm" type="video/webm">
          </video>
        </div>
        <div id="kamali" class="character">
          <style>
            #kamali {
              position: absolute;
              width: 33%;
              right: 0;
              top: 0;
              z-index: 0;
            }
          </style>
          <img src="./img/kamali.png" alt="Kamali">
        </div>
        -->
    </div>

    <header id="header"
            style="z-index: 1; margin-top: -17.28rem; text-shadow: 0 2px black;">
      <h1 style="line-height: 0.85; text-transform: uppercase;">
        <small style="text-transform: none;">Еще Один</small><br />
        Шанс
      </h1>
      <h2 style="margin: 0.5rem 0 0rem; font-family: 'Cormorant Garamond';">
        <em>История Аджамилы</em>
      </h2>
    </header>
  </section>

  <section id="cta" class="container">
    <style>
      #cta {
        margin-top: 2rem;
      }

      #play {
        position: relative;

        &::after {
          position: absolute;
          content: "";
          top: 0;
          left: 0;
          right: 0;
          z-index: -1;
          height: 100%;
          width: 100%;
          transform: scale(0.9) translateZ(0);
          filter: blur(1rem);
          background: conic-gradient(from 180deg at 50% 50%, black, white);
          background-size: 200% 200%;
          animation: animateGlow 5s linear infinite;
          border-radius: 2rem;
        }
      }

      @keyframes animateGlow {
        0% {
          background-position: 0% 50%;
        }

        100% {
          background-position: -200% 50%;
        }
      }
    </style>
    <button id="play" style="align-self: center;">▶ Смотреть трейлер</button>
  </section>

  <hr />

  <section id="details" class="container">
    <style>
      #details {

        dl {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 3rem;

          dt {
            font-family: 'Open Sans', sans-serif;
            opacity: .5;
            font-variation-settings: "wdth" 75;
            text-transform: uppercase;
            letter-spacing: .27ch;
            font-size: .8em;
            margin-bottom: .5rem;
          }

          dd {
            font-size: 1.728rem;
            line-height: 1;
            font-variant-numeric: lining-nums;
          }
        }
      }
    </style>
    <dl>
      <div>
        <dt>Жанр</dt>
        <dd>Психологический, Драма</dd>
      </div>
      <div>
        <dt>Продолжительность</dt>
        <dd>1 час 45 минут</dd>
      </div>
      <div>
        <dt>Рейтинг</dt>
        <dd>12+</dd>
      </div>
      <div>
        <dt>Дата релиза</dt>
        <dd>2025 год</dd>
      </div>
      <div>
        <dt>Формат</dt>
        <dd>4K HDR • Dolby</dd>
      </div>
      <div>
        <dt>Язык</dt>
        <dd>Русский, Английский</dd>
      </div>
      <div>
        <dt>Отзывы</dt>
        <dd>Кинопоиск</dd>
      </div>
      <div>
        <dt>Режиссёр</dt>
        <dd>Юлия Брославская</dd>
      </div>
    </dl>
  </section>

  <section id="festivals" class="container">
    <style>
      #festivals {
        letter-spacing: 10ch;
        font-family: 'Open Sans', sans-serif;
        opacity: .25;
      }
    </style>
    фестивали награды
  </section>

  <blockquote id="synopsis" class="container">
    <style>
      #synopsis {
        text-align: center;
        font-size: 1.726rem;
        font-style: italic;
      }
    </style>
    Чистота, правдивость и аскетизм были жизнью юного Аджамилы. Но неожиданная
    страсть к куртизанке захлестнула его, заставив мошенничать, грабить и
    убивать. Он пал так низко, что, казалось, врата преисподней открыты… Что
    же ждёт его в конце жизни? Сможет ли он избежать расплаты за свои грехи?
    Или у Аджамилы есть ещё один шанс?
  </blockquote>

  <section id="philosophy" class="container">
    <style>
      #philosophy {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 0;

        article {
          background: #1a1a1a;
          border-radius: 1rem;
          padding: 2rem;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
          transition: transform 0.3s ease;

          &:hover {
            transform: translateY(-10px);
          }

          p {
            font-size: 1.2rem;
          }

          h4 {
            margin-bottom: 1rem;
          }
        }
      }
    </style>

    <!-- <h2>Философия</h2> -->

    <article>
      <h4>Когда рушится всё, остаётся только правда о себе</h4>
      <p>Он верил, что добродетель — его суть. Но страсть превратила его в
        преступника. Что останется, когда исчезнет даже тень прежнего «я»?</p>
    </article>

    <article>
      <h4>Когда достиг дна, начинается бездна</h4>
      <p>Украденные жизни. Преданные клятвы. Крик совести, заглушенный страхом.
        Как далеко
        можно зайти, прежде чем дорога назад исчезнет?</p>
    </article>

    <article>
      <h4>Смерть не финал, но последний свидетель</h4>
      <p>Когда дыхание останавливается, прошлое встаёт перед глазами — остается
        только правда. Можно ли
        переписать историю одной фразой, или расплата неизбежна?</p>
    </article>
  </section>

  <section id="stills" class="container">
    <style>
      #stills {
        max-width: none;
      }

      #frames {
        white-space: nowrap;
        max-width: 100%;
        overflow: scroll;

        -ms-overflow-style: none;
        /* IE and Edge */
        scrollbar-width: none;

        /* Firefox */
        &::-webkit-scrollbar {
          display: none;
          /* Chrome, Safari, and Opera */
        }

        figure {
          display: inline-block;
        }

        img {
          height: 16rem;
        }
      }

      .fancybox__nav {
        button:hover {
          background: transparent;
        }
      }
    </style>
    <h2>Кадры</h2>

    <div id="frames">
      <figure><a href="img/frames/frame1.webp" data-fancybox="gallery"><img
               src="img/frames/frame1.webp" loading="lazy" alt="Frame 1" /></a>
      </figure>
      <figure><a href="img/frames/frame2.webp" data-fancybox="gallery"><img
               src="img/frames/frame2.webp" loading="lazy" alt="Frame 2" /></a>
      </figure>
      <figure><a href="img/frames/frame3.webp" data-fancybox="gallery"><img
               src="img/frames/frame3.webp" loading="lazy" alt="Frame 3" /></a>
      </figure>
      <figure><a href="img/frames/frame4.webp" data-fancybox="gallery"><img
               src="img/frames/frame4.webp" loading="lazy" alt="Frame 4" /></a>
      </figure>
      <figure><a href="img/frames/frame5.webp" data-fancybox="gallery"><img
               src="img/frames/frame5.webp" loading="lazy" alt="Frame 5" /></a>
      </figure>
      <figure><a href="img/frames/frame6.webp" data-fancybox="gallery"><img
               src="img/frames/frame6.webp" loading="lazy" alt="Frame 6" /></a>
      </figure>
      <figure><a href="img/frames/frame7.webp" data-fancybox="gallery"><img
               src="img/frames/frame7.webp" loading="lazy" alt="Frame 7" /></a>
      </figure>
      <figure><a href="img/frames/frame8.webp" data-fancybox="gallery"><img
               src="img/frames/frame8.webp" loading="lazy" alt="Frame 8" /></a>
      </figure>
      <figure><a href="img/frames/frame9.webp" data-fancybox="gallery"><img
               src="img/frames/frame9.webp" loading="lazy" alt="Frame 9" /></a>
      </figure>
      <figure><a href="img/frames/frame10.webp" data-fancybox="gallery"><img
               src="img/frames/frame10.webp" loading="lazy"
               alt="Frame 10" /></a></figure>
      <figure><a href="img/frames/frame11.webp" data-fancybox="gallery"><img
               src="img/frames/frame11.webp" loading="lazy"
               alt="Frame 11" /></a></figure>
      <figure><a href="img/frames/frame12.webp" data-fancybox="gallery"><img
               src="img/frames/frame12.webp" loading="lazy"
               alt="Frame 12" /></a></figure>
      <figure><a href="img/frames/frame13.webp" data-fancybox="gallery"><img
               src="img/frames/frame13.webp" loading="lazy"
               alt="Frame 13" /></a></figure>
      <figure><a href="img/frames/frame14.webp" data-fancybox="gallery"><img
               src="img/frames/frame14.webp" loading="lazy"
               alt="Frame 14" /></a></figure>
      <figure><a href="img/frames/frame15.webp" data-fancybox="gallery"><img
               src="img/frames/frame15.webp" loading="lazy"
               alt="Frame 15" /></a></figure>
      <figure><a href="img/frames/frame16.webp" data-fancybox="gallery"><img
               src="img/frames/frame16.webp" loading="lazy"
               alt="Frame 16" /></a></figure>
      <figure><a href="img/frames/frame17.webp" data-fancybox="gallery"><img
               src="img/frames/frame17.webp" loading="lazy"
               alt="Frame 17" /></a></figure>
      <figure><a href="img/frames/frame18.webp" data-fancybox="gallery"><img
               src="img/frames/frame18.webp" loading="lazy"
               alt="Frame 18" /></a></figure>
      <figure><a href="img/frames/frame19.webp" data-fancybox="gallery"><img
               src="img/frames/frame19.webp" loading="lazy"
               alt="Frame 19" /></a></figure>
      <figure><a href="img/frames/frame20.webp" data-fancybox="gallery"><img
               src="img/frames/frame20.webp" loading="lazy"
               alt="Frame 20" /></a></figure>
      <figure><a href="img/frames/frame21.webp" data-fancybox="gallery"><img
               src="img/frames/frame21.webp" loading="lazy"
               alt="Frame 21" /></a></figure>
      <figure><a href="img/frames/frame22.webp" data-fancybox="gallery"><img
               src="img/frames/frame22.webp" loading="lazy"
               alt="Frame 22" /></a></figure>
      <figure><a href="img/frames/frame23.webp" data-fancybox="gallery"><img
               src="img/frames/frame23.webp" loading="lazy"
               alt="Frame 23" /></a></figure>
      <figure><a href="img/frames/frame24.webp" data-fancybox="gallery"><img
               src="img/frames/frame24.webp" loading="lazy"
               alt="Frame 24" /></a></figure>
      <figure><a href="img/frames/frame25.webp" data-fancybox="gallery"><img
               src="img/frames/frame25.webp" loading="lazy"
               alt="Frame 25" /></a></figure>
      <figure><a href="img/frames/frame26.webp" data-fancybox="gallery"><img
               src="img/frames/frame26.webp" loading="lazy"
               alt="Frame 26" /></a></figure>
      <figure><a href="img/frames/frame27.webp" data-fancybox="gallery"><img
               src="img/frames/frame27.webp" loading="lazy"
               alt="Frame 27" /></a></figure>
      <figure><a href="img/frames/frame28.webp" data-fancybox="gallery"><img
               src="img/frames/frame28.webp" loading="lazy"
               alt="Frame 28" /></a></figure>
      <figure><a href="img/frames/frame29.webp" data-fancybox="gallery"><img
               src="img/frames/frame29.webp" loading="lazy"
               alt="Frame 29" /></a></figure>
      <figure><a href="img/frames/frame30.webp" data-fancybox="gallery"><img
               src="img/frames/frame30.webp" loading="lazy"
               alt="Frame 30" /></a></figure>
      <figure><a href="img/frames/frame31.webp" data-fancybox="gallery"><img
               src="img/frames/frame31.webp" loading="lazy"
               alt="Frame 31" /></a></figure>
      <figure><a href="img/frames/frame32.webp" data-fancybox="gallery"><img
               src="img/frames/frame32.webp" loading="lazy"
               alt="Frame 32" /></a></figure>
      <figure><a href="img/frames/frame33.webp" data-fancybox="gallery"><img
               src="img/frames/frame33.webp" loading="lazy"
               alt="Frame 33" /></a></figure>
      <figure><a href="img/frames/frame34.webp" data-fancybox="gallery"><img
               src="img/frames/frame34.webp" loading="lazy"
               alt="Frame 34" /></a></figure>
      <figure><a href="img/frames/frame35.webp" data-fancybox="gallery"><img
               src="img/frames/frame35.webp" loading="lazy"
               alt="Frame 35" /></a></figure>
      <figure><a href="img/frames/frame36.webp" data-fancybox="gallery"><img
               src="img/frames/frame36.webp" loading="lazy"
               alt="Frame 36" /></a></figure>
      <figure><a href="img/frames/frame37.webp" data-fancybox="gallery"><img
               src="img/frames/frame37.webp" loading="lazy"
               alt="Frame 37" /></a></figure>
      <figure><a href="img/frames/frame38.webp" data-fancybox="gallery"><img
               src="img/frames/frame38.webp" loading="lazy"
               alt="Frame 38" /></a></figure>
      <figure><a href="img/frames/frame39.webp" data-fancybox="gallery"><img
               src="img/frames/frame39.webp" loading="lazy"
               alt="Frame 39" /></a></figure>
      <figure><a href="img/frames/frame40.webp" data-fancybox="gallery"><img
               src="img/frames/frame40.webp" loading="lazy"
               alt="Frame 40" /></a></figure>
      <figure><a href="img/frames/frame41.webp" data-fancybox="gallery"><img
               src="img/frames/frame41.webp" loading="lazy"
               alt="Frame 41" /></a></figure>
      <figure><a href="img/frames/frame42.webp" data-fancybox="gallery"><img
               src="img/frames/frame42.webp" loading="lazy"
               alt="Frame 42" /></a></figure>
      <figure><a href="img/frames/frame43.webp" data-fancybox="gallery"><img
               src="img/frames/frame43.webp" loading="lazy"
               alt="Frame 43" /></a></figure>
      <figure><a href="img/frames/frame44.webp" data-fancybox="gallery"><img
               src="img/frames/frame44.webp" loading="lazy"
               alt="Frame 44" /></a></figure>
      <figure><a href="img/frames/frame45.webp" data-fancybox="gallery"><img
               src="img/frames/frame45.webp" loading="lazy"
               alt="Frame 45" /></a></figure>
      <figure><a href="img/frames/frame46.webp" data-fancybox="gallery"><img
               src="img/frames/frame46.webp" loading="lazy"
               alt="Frame 46" /></a></figure>
      <figure><a href="img/frames/frame47.webp" data-fancybox="gallery"><img
               src="img/frames/frame47.webp" loading="lazy"
               alt="Frame 47" /></a></figure>
      <figure><a href="img/frames/frame48.webp" data-fancybox="gallery"><img
               src="img/frames/frame48.webp" loading="lazy"
               alt="Frame 48" /></a></figure>
      <figure><a href="img/frames/frame49.webp" data-fancybox="gallery"><img
               src="img/frames/frame49.webp" loading="lazy"
               alt="Frame 49" /></a></figure>
    </div>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" />
    <script
            src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script>
    <script>
      let isLightbox = false

      Object.assign(Fancybox.defaults, {
        caption: false,
        Toolbar: false,
        Thumbs: false,
        wheel: 'slide',
        closeButton: false,
        on: {
          activate: (e) => (console.log('ACTIVATE', e), isLightbox = true),
          deactivate: () => (isLightbox = false)
        }
      });

      let frames = document.getElementById('frames')

      // cumulative scroll
      let hover = false

      setInterval(() => updateScroll(.5), 18)

      let prevWScroll = window.scrollY
      let isScrolling
      let scrollTimeout
      window.addEventListener('scroll', () => {
        let delta = window.scrollY - prevWScroll
        prevWScroll = window.scrollY
        updateScroll(delta * .5)

        isScrolling = true
        if (scrollTimeout) clearTimeout(scrollTimeout);
        scrollTimeout = setTimeout(() => isScrolling = false, 200);
      }, { passive: true });

      function updateScroll(delta) {
        if (isLightbox) return
        frames.scrollLeft += delta
      }

      frames.addEventListener('mouseenter', () => { if (!isScrolling) hover = true }, { passive: true });
      frames.addEventListener('mousemove', () => { if (!isScrolling) hover = true }, { passive: true });
      frames.addEventListener('mouseleave', () => { hover = false }, { passive: true });
    </script>
  </section>

  <section id="cast" class="container">
    <style>
      #cast {}

      .actors {
        display: grid;
        margin: 3.6rem 0;
        gap: 3.6rem;
        grid-template-columns: repeat(2, 1fr);

        @media (min-width: 900px) {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      .actor {

        /* background: radial-gradient(circle, rgba(139,0,0,1) 0%, rgba(0,0,0,1) 100%); */
        video,
        img {
          overflow: hidden;
          border-radius: 160px;
          margin-bottom: 1rem;
        }
      }
    </style>

    <h2>Актерский состав</h2>

    <div class="actors">
      <div class="actor">
        <video width="216" height="216" muted loop src="img/cast/ajamil.webm"
               onmouseenter="this.play();" onmouseleave="this.pause();"></video>
        <h4>Андрей Коновалов</h4>
        <p><em>Аджамила</em></p>
      </div>

      <div class="actor">
        <video width="216" height="216" muted loop src="img/cast/kamali.webm"
               onmouseenter="this.play();" onmouseleave="this.pause();"></video>
        <h4>Инна Щедрова</h4>
        <p><em>Камали</em></p>
      </div>

      <div class="actor">
        <video width="216" height="216" muted loop src="img/cast/varsha.webm"
               onmouseenter="this.play();" onmouseleave="this.pause();"></video>
        <h4>Лидия Бельская</h4>
        <p><em>Варша</em></p>
      </div>

      <!-- <div class="actor">
        <img src="actor3.jpg" alt="">
        <h4>Инна Ершова</h4>
        <p>Отец</p>
      </div>

      <div class="actor">
        <img src="actor3.jpg" alt="">
        <h4>Инна Ершова</h4>
        <p>Гуру</p>
      </div> -->
    </div>
  </section>

  <section id="team" class="container">
    <style>
      #team {
        dl {
          margin-top: 4rem;
          font-variation-settings: "wdth" 75;
          font-family: 'Open Sans', sans-serif;
          column-count: 2;

          @media (max-width: 640px) {
            column-count: 1;
          }

          dt {
            opacity: .5;
          }

          dd {
            letter-spacing: .27ch;
            text-transform: uppercase;
          }

          div {
            break-inside: avoid;
            margin: 0 0 2rem;
          }
        }
      }
    </style>
    <h2>Творческая команда</h2>

    <dl>
      <div>
        <dt>Режиссёр</dt>
        <dd>Юлия Брославская</dd>
      </div>
      <div>
        <dt>Автор сценария</dt>
        <dd>Олег Ерёменко</dd>
      </div>
      <div>
        <dt>Оператор</dt>
        <dd>Наталья Голомай</dd>
      </div>
      <div>
        <dt>Художник</dt>
        <dd>Юлия Брославская</dd>
      </div>
      <div>
        <dt>Продюсер</dt>
        <dd>Юлия Брославская</dd>
      </div>
      <div>
        <dt>Композиторы</dt>
        <dd>Константин Дюжарден,<br> Владислав Якутко,<br> Антон Кайгородов</dd>
      </div>
    </dl>
  </section>

  <section id="soundtrack" class="container">
    <style>
      #soundtrack {}

      ul {
        list-style: none;
        padding: 0;
        display: flex;
        flex-direction: column;
        gap: 2rem;
        margin-top: 4rem;
      }
    </style>
    <h2>Музыка в фильме</h2>
    <ul>
      <li class="track">
        <audio controls>
          <source src="audio/track1.mp3" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <p><em>Гитарный вальс</em> – Константин Дюжарден</p>
      </li>
      <li class="track">
        <audio controls>
          <source src="audio/track2.mp3" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <p><em>Вальс пианино</em> – Антон Кайгородов</p>
      </li>
    </ul>
  </section>

  <section id="reflections" class="container">
    <style>
      #reflections {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      textarea {
        background: transparent;
        width: 81ch;
        border-radius: 1.6rem;
        color: white;
        padding: 1.2rem;

        &:focus {
          outline: none;
          border-color: white;
        }
      }
    </style>
    <h2>Осмысление</h2>
    <h4 style="max-width: 540px;"><label for="feedback">Что вам откликнулось в
        фильме? Какие мысли или фидбек?</label></h4>
    <div style="max-width: 640px;">
      <textarea placeholder="Напишите нам..." id="feedback" name="feedback"
                rows="3"
                style="resize: none; overflow: hidden; max-width: 100%; display: block;"
                oninput="this.style.height='auto'; this.style.height = this.scrollHeight + 'px'"></textarea>
      <button onclick="openEmailDialog()"
                style="margin-top: 1rem;">✉️  Отправить</button>
    </div>
    <script>
      function openEmailDialog() {
        const feedback = document.getElementById('feedback').value;
        const subject = encodeURIComponent('Фидбек по фильму');
        const body = encodeURIComponent(`Вот мои мысли о фильме:\n\n${feedback}`);

        const email = "example@gmail.com";
        const gmailURL = `https://mail.google.com/mail/?view=cm&fs=1&to=${email}&su=${subject}&body=${body}`;
        const mailtoURL = `mailto:${email}?subject=${subject}&body=${body}`;
        const link = document.createElement('a')
        link.target = "_blank";

        function checkGmailLogin() {
          fetch("https://mail.google.com/mail/u/0/", { mode: "no-cors" })
            .then(() => {
              link.href = gmailURL;
              link.click();
            })
            .catch(() => {
              link.href = mailtoURL;
              link.click()
            });
        }

        function checkGmailHandler() {
          if (navigator.userAgent.includes("Chrome")) {
            try {
              navigator.registerProtocolHandler(
                "mailto",
                "https://mail.google.com/mail/?extsrc=mailto&url=%s",
                "Gmail"
              );
              if (navigator.isProtocolHandlerRegistered) {
                navigator.isProtocolHandlerRegistered("mailto", "https://mail.google.com/")
                  .then(isRegistered => {
                    if (isRegistered) {
                      document.getElementById("emailLink").href = gmailURL;
                    } else {
                      checkGmailLogin();
                    }
                  })
                  .catch(checkGmailLogin);
              } else {
                checkGmailLogin();
              }
            }
            catch (e) {
              console.warn(e)
              checkGmailLogin();
            }
          } else {
            checkGmailLogin();
          }
        }
        checkGmailHandler();
      }
    </script>
  </section>

  <section id="quiz" class="container">
    <style>
      #quiz {
        max-width: 640px;

        h4 {
          font-variant-numeric: lining-nums;
        }
      }

      .quiz-item {
        margin: 2rem 0;
        border-radius: 8px;
        display: none;
        font-variant-numeric: lining-nums;

        &.active {
          display: block;
        }
      }

      .poll {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: .5rem;
      }

      .poll button {
        min-width: 50%;
      }

      .poll button.correct {
        border-color: #4CAF50;
      }

      #results {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin: 3rem;
        font-size: 1.2em;
      }
    </style>

    <h2>Проверь себя</h2>

    <div class="quiz-item active">
      <h4>1. Кем был Аджамила по происхождению?</h4>
      <div class="poll" data-question="1">
        <button>Бандитом</button>
        <button class="correct">Брахманом</button>
        <button>Блоггером</button>
      </div>
    </div>

    <div class="quiz-item">
      <h4>2. Почему Аджамила оставил праведный путь?</h4>
      <div class="poll" data-question="2">
        <button class="correct">Влюбился в женщину низшей касты</button>
        <button>Был проклят мудрецом</button>
        <button>Потерял состояние на криптовалютах</button>
      </div>
    </div>

    <div class="quiz-item">
      <h4>3. Какое имя носил младший сын Аджамилы?</h4>
      <div class="poll" data-question="3">
        <button>Мадхава</button>
        <button>Гопала</button>
        <button class="correct">Нараяна</button>
      </div>
    </div>

    <div class="quiz-item">
      <h4>4. Почему посланники Вишну спасли Аджамилу?</h4>
      <div class="poll" data-question="4">
        <button>Его жена молилась за него</button>
        <button class="correct">Произнес имя Нараяны</button>
        <button>Он подписался на их YouTube-канал</button>
      </div>
    </div>

    <div class="quiz-item">
      <h4>5. Сколько сыновей было у Аджамилы?</h4>
      <div class="poll" data-question="5">
        <button class="correct">10</button>
        <button>3</button>
        <button>42</button>
        <!-- Смешной вариант -->
      </div>
    </div>

    <div id="results" hidden>
      <div class="content">
        <div class="result-5" hidden>
          <h3>🌟</h3>
          <h4>Отлично!</h4>
          <p>Вы настоящий пандит! <br>Ваш ум сияет ярче тысячи Солнц! Вы знаете фильм наизусть, включая те сцены, которые вырезали на монтаже. <br>Совет: попробуйте прочитать оригинал истории в <a href="https://vedabase.io/ru/library/sb/6/">6-й песне Шримад Бхагаватам</a>.</p>
        </div>
        <div class="result-4" hidden>
          <h3>📚</h3>
          <h4>Хорошо!</h4>
          <p>Вы на пороге просветления! <br>Ваши знания как у сценариста, который только что закончил писать сюжет. <br>Совет: Попробуйте пересмотреть фильм, не отвлекаясь на телефон, но помните – слишком много просмотров может вызвать желание цитировать диалоги!</p>
        </div>
        <div class="result-3" hidden>
          <h3>📖</h3>
          <h4>Нормально!</h4>
          <p>Вы на верном пути! <br>Ваши знания как у зрителя, который смотрел фильм, но пропустил пару сцен. <br>Совет: Может, стоит пересмотреть фильм?</p>
        </div>
        <div class="result-2 result-1 result-0" hidden>
          <h3>😅</h3>
          <h4>Ом Намах Шивая!</h4>
          <p>Вы точно смотрели наш фильм, или может быть проспали? <br>Совет: возьмите попкорн, начните с начала фильма и смотрите внимательно.</p>
        </div>
      </div>
      <!-- <button style="margin: 2rem auto;">Пройти снова</button> -->
    </div>

    <script>
      let currentQuestion = 0;
      const questions = document.querySelectorAll('.quiz-item');
      const totalQuestions = questions.length;

      function showNextQuestion() {
        questions[currentQuestion].classList.remove('active');
        currentQuestion++;
        if (currentQuestion < totalQuestions) {
          questions[currentQuestion].classList.add('active');
        } else {
          showFinalResults();
        }
      }

      function showFinalResults() {
        let correctCount = 0;
        for (let i = 1; i <= totalQuestions; i++) {
          if (localStorage.getItem(`quiz_${i}`) === 'true') correctCount++;
        }

        let resultText = '', icon = '';
        document.querySelector('#results').removeAttribute('hidden')
        document.querySelector(`#results .result-${correctCount}`).removeAttribute('hidden')
      }

      document.querySelectorAll('.poll button').forEach(button => {
        button.addEventListener('click', function () {
          const poll = this.parentElement;
          const isCorrect = this.classList.contains('correct');

          // Показываем результат
          this.style.background = isCorrect ? '#4CAF50' : '#ff4444';
          this.style.color = 'white';

          // Блокируем другие ответы
          poll.querySelectorAll('button').forEach(btn => {
            btn.disabled = true;
            if (btn.classList.contains('correct')) {
              btn.style.background = '#4CAF50';
              btn.style.color = 'white';
            }
          });

          // Сохраняем статистику
          const questionId = poll.dataset.question;
          localStorage.setItem(`quiz_${questionId}`, isCorrect);

          // Показываем следующий вопрос через секунду
          setTimeout(showNextQuestion, 1000);
        });
      });

      // Показываем первый вопрос при загрузке
      questions[0].classList.add('active');

      // FIXME: add try again
      // document.querySelector('#results button').addEventListener('click', () => {
      //   currentQuestion = 0
      //   questions[0].classList.add('active');
      //   questions.forEach(q => q.classList.remove('active'))
      // })
    </script>
  </section>

  <hr>

  <footer class="container">
    <style>
    </style>
    <nav
         style="margin-bottom: 1rem; display: flex; gap: 1rem; justify-content: center;">
      <a href="#home">Home</a>
      <a href="#watch">Watch Now</a>
      <a href="#trailer">Trailer</a>
      <a href="#merch">Merch</a>
      <a href="#about">About</a>
      <a href="#contact">Contact</a>
      <a href="#terms">Terms</a>
      <a href="#privacy">Privacy</a>
      <br>
      <!-- <a href="https://instagram.com" target="_blank">IG</a>
      <a href="https://facebook.com" target="_blank">FB</a>
      <a href="https://youtube.com" target="_blank">YT</a>
      <a href="https://twitter.com" target="_blank">X</a><br> -->
    </nav>
    <p>© <span id="currentYear">2024
        <script>document.currentScript.parentElement.textContent = new Date().getFullYear()</script>
      </span> Еще один шанс - История Аджамилы.</p>
    <p>Сделано в <a href="https://web-being.org">web-being</a>.</p>
  </footer>

</html>
